{"payload":{"allShortcutsEnabled":true,"fileTree":{"":{"items":[{"name":"README.md","path":"README.md","contentType":"file"},{"name":"kafka.ipynb","path":"kafka.ipynb","contentType":"file"},{"name":"model.tar.gz","path":"model.tar.gz","contentType":"file"},{"name":"sagemaker-deployment.ipynb","path":"sagemaker-deployment.ipynb","contentType":"file"},{"name":"spark_sjob.ipynb","path":"spark_sjob.ipynb","contentType":"file"}],"totalCount":5}},"fileTreeProcessingTime":1.742575,"foldersToFetch":[],"reducedMotionEnabled":"system","repo":{"id":727475731,"defaultBranch":"main","name":"Parking_Lot_Detection","ownerLogin":"gouravvemula0","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2023-12-04T18:58:14.000-05:00","ownerAvatar":"https://avatars.githubusercontent.com/u/58952267?v=4","public":true,"private":false,"isOrgOwned":false},"symbolsExpanded":false,"treeExpanded":true,"refInfo":{"name":"main","listCacheKey":"v0:1701734473.0","canEdit":true,"refType":"branch","currentOid":"d76ee76cfeb0090c89400dbf18cea922f51e2ca1"},"path":"sagemaker-deployment.ipynb","currentUser":{"id":129335905,"login":"Unisha10","userEmail":"aryalunisha10@gmail.com"},"blob":{"rawLines":["{"," \"cells\": [","  {","   \"cell_type\": \"code\",","   \"execution_count\": 3,","   \"metadata\": {},","   \"outputs\": [],","   \"source\": [","    \"import os, sagemaker, boto3\\n\",","    \"from datetime import datetime\\n\",","    \"from sagemaker import s3\\n\",","    \"from sagemaker import get_execution_role\\n\",","    \"from sagemaker.pytorch import PyTorchModel\\n\",","    \"from sagemaker.deserializers import JSONDeserializer\"","   ]","  },","  {","   \"cell_type\": \"code\",","   \"execution_count\": 18,","   \"metadata\": {},","   \"outputs\": [","    {","     \"name\": \"stdout\",","     \"output_type\": \"stream\",","     \"text\": [","      \"{'ResponseMetadata': {'RequestId': 'RSD3WVJ8BRSV4AW7', 'HostId': '/om1x1E9RX9wRhXAM530d1DmYqjGCamIKa/AlokUMCrzpDejjY/U+i9zc9ev1hGp92aYP2sObTk=', 'HTTPStatusCode': 200, 'HTTPHeaders': {'x-amz-id-2': '/om1x1E9RX9wRhXAM530d1DmYqjGCamIKa/AlokUMCrzpDejjY/U+i9zc9ev1hGp92aYP2sObTk=', 'x-amz-request-id': 'RSD3WVJ8BRSV4AW7', 'date': 'Sun, 03 Dec 2023 23:50:28 GMT', 'content-type': 'application/xml', 'transfer-encoding': 'chunked', 'server': 'AmazonS3'}, 'RetryAttempts': 0}, 'Buckets': [{'Name': 'models-ml-cc', 'CreationDate': datetime.datetime(2023, 12, 3, 1, 22, tzinfo=tzutc())}], 'Owner': {'DisplayName': 'gvemula', 'ID': 'b45674900bd6b61840674592aee8fd770ce2e6a1fa1cb74a09f8859c25e1e3b8'}}\\n\",","      \"Bucket: s3://models-ml-cc\\n\"","     ]","    }","   ],","   \"source\": [","    \"s3_client = boto3.client('s3')\\n\",","    \"response = s3_client.list_buckets()\\n\",","    \"\\n\",","    \"print(response)\\n\",","    \"for bucket in response['Buckets']:\\n\",","    \"    if 'model' in bucket[\\\"Name\\\"]:\\n\",","    \"        bucket = 's3://' + bucket[\\\"Name\\\"]\\n\",","    \"        break\\n\",","    \"\\n\",","    \"print(f'Bucket: {bucket}')\\n\",","    \"sess = sagemaker.Session(default_bucket=bucket.split('s3://')[-1])\\n\",","    \"\\n\",","    \"prefix = \\\"yolov8/parking-custom-endpoint\\\"\"","   ]","  },","  {","   \"cell_type\": \"code\",","   \"execution_count\": 19,","   \"metadata\": {},","   \"outputs\": [","    {","     \"name\": \"stdout\",","     \"output_type\": \"stream\",","     \"text\": [","      \"Role: AmazonSageMaker-ExecutionRole-20231202T200293\\n\",","      \"Model Data: s3://models-ml-cc/yolov8/parking-custom-endpoint/model.tar.gz\\n\"","     ]","    }","   ],","   \"source\": [","    \"sm_client = boto3.client(service_name=\\\"sagemaker\\\")\\n\",","    \"runtime_sm_client = boto3.client(service_name=\\\"sagemaker-runtime\\\")\\n\",","    \"\\n\",","    \"account_id = boto3.client(\\\"sts\\\").get_caller_identity()[\\\"Account\\\"]\\n\",","    \"region = boto3.Session().region_name\\n\",","    \"\\n\",","    \"role = \\\"AmazonSageMaker-ExecutionRole-20231202T200293\\\"\\n\",","    \"print(f'Role: {role}')\\n\",","    \"\\n\",","    \"\\n\",","    \"model_data = s3.S3Uploader.upload(\\\"/Users/gouravvemula/Downloads/parking-model/model.tar.gz\\\", bucket + \\\"/\\\" + prefix)\\n\",","    \"print(f'Model Data: {model_data}')\"","   ]","  },","  {","   \"cell_type\": \"code\",","   \"execution_count\": 20,","   \"metadata\": {},","   \"outputs\": [],","   \"source\": [","    \"model = PyTorchModel(entry_point='inference.py',\\n\",","    \"                     model_data=model_data, \\n\",","    \"                     framework_version='1.12', \\n\",","    \"                     py_version='py38',\\n\",","    \"                     role=role,\\n\",","    \"                     env={'TS_MAX_RESPONSE_SIZE':'20000000', 'YOLOV8_MODEL': 'yolov8m.pt'},\\n\",","    \"                     sagemaker_session=sess)\"","   ]","  },","  {","   \"cell_type\": \"code\",","   \"execution_count\": 21,","   \"metadata\": {},","   \"outputs\": [","    {","     \"name\": \"stdout\",","     \"output_type\": \"stream\",","     \"text\": [","      \"Stored 'ENDPOINT_NAME' (str)\\n\",","      \"Endpoint Name: yolov8-pytorch-2023-12-03-23-50-32-390066\\n\",","      \"--------!\"","     ]","    }","   ],","   \"source\": [","    \"INSTANCE_TYPE = 'ml.m4.xlarge'\\n\",","    \"ENDPOINT_NAME = 'yolov8-pytorch-' + str(datetime.utcnow().strftime('%Y-%m-%d-%H-%M-%S-%f'))\\n\",","    \"\\n\",","    \"# Store the endpoint name in the history to be accessed by 2_TestEndpoint.ipynb notebook\\n\",","    \"%store ENDPOINT_NAME\\n\",","    \"print(f'Endpoint Name: {ENDPOINT_NAME}')\\n\",","    \"\\n\",","    \"predictor = model.deploy(initial_instance_count=1, \\n\",","    \"                         instance_type=INSTANCE_TYPE,\\n\",","    \"                         deserializer=JSONDeserializer(),\\n\",","    \"                         endpoint_name=ENDPOINT_NAME)\"","   ]","  }"," ],"," \"metadata\": {","  \"kernelspec\": {","   \"display_name\": \"Python 3\",","   \"language\": \"python\",","   \"name\": \"python3\"","  },","  \"language_info\": {","   \"codemirror_mode\": {","    \"name\": \"ipython\",","    \"version\": 3","   },","   \"file_extension\": \".py\",","   \"mimetype\": \"text/x-python\",","   \"name\": \"python\",","   \"nbconvert_exporter\": \"python\",","   \"pygments_lexer\": \"ipython3\",","   \"version\": \"3.11.2\"","  }"," },"," \"nbformat\": 4,"," \"nbformat_minor\": 2","}"],"stylingDirectives":null,"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/gouravvemula0/Parking_Lot_Detection/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":false,"repoAlertsPath":"/gouravvemula0/Parking_Lot_Detection/security/dependabot","repoSecurityAndAnalysisPath":"/gouravvemula0/Parking_Lot_Detection/settings/security_analysis","repoOwnerIsOrg":false,"currentUserCanAdminRepo":false},"displayName":"sagemaker-deployment.ipynb","displayUrl":"https://notebooks.githubusercontent.com/view/ipynb?browser=safari&bypass_fastly=true&color_mode=auto&commit=d76ee76cfeb0090c89400dbf18cea922f51e2ca1&device=unknown_device&docs_host=https%3A%2F%2Fdocs.github.com&enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f676f7572617676656d756c61302f5061726b696e675f4c6f745f446574656374696f6e2f643736656537366366656230303930633839343030646266313863656139323266353165326361312f736167656d616b65722d6465706c6f796d656e742e6970796e62&logged_in=true&nwo=gouravvemula0%2FParking_Lot_Detection&path=sagemaker-deployment.ipynb&platform=mac&repository_id=727475731&repository_type=Repository&version=17","headerInfo":{"blobSize":"4.51 KB","deleteInfo":{"deleteTooltip":"Fork this repository and delete the file"},"editInfo":{"editTooltip":"Fork this repository and edit the file"},"ghDesktopPath":"https://desktop.github.com","gitLfsPath":null,"onBranch":true,"shortPath":"40b4b23","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2Fgouravvemula0%2FParking_Lot_Detection%2Fblob%2Fmain%2Fsagemaker-deployment.ipynb","isCSV":false,"isRichtext":false,"toc":null,"lineInfo":{"truncatedLoc":"142","truncatedSloc":"142"},"mode":"file"},"image":false,"isCodeownersFile":null,"isPlain":false,"isValidLegacyIssueTemplate":false,"issueTemplateHelpUrl":"https://docs.github.com/articles/about-issue-and-pull-request-templates","issueTemplate":null,"discussionTemplate":null,"language":"Jupyter Notebook","languageID":185,"large":false,"loggedIn":true,"newDiscussionPath":"/gouravvemula0/Parking_Lot_Detection/discussions/new","newIssuePath":"/gouravvemula0/Parking_Lot_Detection/issues/new","planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/gouravvemula0/Parking_Lot_Detection/blob/main/sagemaker-deployment.ipynb","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","dismissStackNoticePath":"/settings/dismiss-notice/publish_stack_from_file","releasePath":"/gouravvemula0/Parking_Lot_Detection/releases/new?marketplace=true","showPublishActionBanner":false,"showPublishStackBanner":false},"rawBlobUrl":"https://github.com/gouravvemula0/Parking_Lot_Detection/raw/main/sagemaker-deployment.ipynb","renderImageOrRaw":false,"richText":null,"renderedFileInfo":{"identityUUID":"5d9671be-fa07-4646-b6cb-f282022bb3cb","renderFileType":"ipynb","size":4618},"shortPath":null,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"repoOwner":"gouravvemula0","repoName":"Parking_Lot_Detection","showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","showDependabotConfigurationBanner":false,"actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timedOut":false,"notAnalyzed":true,"symbols":[]}},"copilotInfo":{"documentationUrl":"https://docs.github.com/copilot/overview-of-github-copilot/about-github-copilot-for-individuals","notices":{"codeViewPopover":{"dismissed":false,"dismissPath":"/settings/dismiss-notice/code_view_copilot_popover"}},"userAccess":{"accessAllowed":false,"hasSubscriptionEnded":false,"orgHasCFBAccess":false,"userHasCFIAccess":false,"userHasOrgs":false,"userIsOrgAdmin":false,"userIsOrgMember":false,"business":null,"featureRequestInfo":null}},"copilotAccessAllowed":false,"csrf_tokens":{"/gouravvemula0/Parking_Lot_Detection/branches":{"post":"h4nFtNyvdCg8z5Evj_Fab2mvZ2eB3oII5JOVZnu3zw5gwf4wP8QJZ65zwvYzPbACTqk3pru6xXwOA8M6VxTtKw"},"/repos/preferences":{"post":"8Bd7n2TGYwRc11htwWOj_osFgdpLXkU86u28zvG0-FoLwkxmWNWqXZh35g71r7Yrg2yQSpdT-C_3Zgg53rgAzg"}}},"title":"Parking_Lot_Detection/sagemaker-deployment.ipynb at main Â· gouravvemula0/Parking_Lot_Detection"}